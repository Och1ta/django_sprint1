{% with request.resolver_match.view_name as view_name %}
  <article>
    <hr>
    <ul>
      <li>Место: {{ post.location }}</li>
      <li>Дата: {{ post.date }}</li>
      <li>Категория:
        <a href="{% url 'blog:category_posts' post.category %} ">
          {{ post.category }}
        </a>
      </li>
      {% if view_name == 'blog:index' or view_name == 'blog:category_posts' %}
        <p>{{ post.text|truncatewords:10 }}</p>
        <a href="{% url 'blog:post_detail' post.id %}">
          Читать полный текст
        </a>
      {% elif view_name == 'blog:post_detail' %}
        <p>{{ post.text|linebreaksbr }}</p>
      {% endif %}
    </ul>
  </article>
{% endwith %}